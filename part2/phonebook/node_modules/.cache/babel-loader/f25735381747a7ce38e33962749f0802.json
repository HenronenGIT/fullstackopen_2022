{"ast":null,"code":"import _slicedToArray from\"/Users/henrimaronen/workspace/github/fullstackopen_2022/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import React from'react';import personService from'./services/persons.js';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];var deleteUser=function deleteUser(id){var person=persons.find(function(n){return n.id===id;});if(window.confirm(\"Delete \".concat(person.name,\" ?\"))){personService.deleteUser(id).then(setPersons(persons.filter(function(person){return person.id!==id;}))).catch(function(error){setErrorMessage(\"Information of \".concat(person.name,\" has already been removed from server\"));setPersons(persons.filter(function(p){return p.id!==person.id;}));});setTimeout(function(){return setErrorMessage(null);},5000);}};useEffect(function(){personService.getAll().then(function(persons){setPersons(persons);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{successMessage:successMessage,errorMessage:errorMessage}),/*#__PURE__*/_jsx(Filter,{filter:filter,setFilter:setFilter}),/*#__PURE__*/_jsx(\"h3\",{children:\"add new\"}),/*#__PURE__*/_jsx(Form,{persons:persons,newName:newName,newNumber:newNumber,setNewName:setNewName,setPersons:setPersons,setNewNumber:setNewNumber,setErrorMessage:setErrorMessage,setSuccessMessage:setSuccessMessage}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:persons,filter:filter,deleteUser:deleteUser})]});};var Filter=function Filter(_ref){var filter=_ref.filter,setFilter=_ref.setFilter;var handleFilterChange=function handleFilterChange(event){setFilter(event.target.value);};return/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"filter shown with:\",/*#__PURE__*/_jsx(\"input\",{value:filter,onChange:handleFilterChange})]})});};var Form=function Form(_ref2){var persons=_ref2.persons,newName=_ref2.newName,newNumber=_ref2.newNumber,setPersons=_ref2.setPersons,setNewName=_ref2.setNewName,setNewNumber=_ref2.setNewNumber,setErrorMessage=_ref2.setErrorMessage,setSuccessMessage=_ref2.setSuccessMessage;var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var addPerson=function addPerson(event){event.preventDefault();// const person = persons.find(person => person.name === newName)\n// if (person === undefined) {\nvar personObject={name:newName,number:newNumber};personService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));});setSuccessMessage(\"Added \".concat(personObject.name));setTimeout(function(){setSuccessMessage(null);},5000);// }\n// else {\n// \tif (!window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n// \t\treturn;\n// \tconst changedPerson = { ...person, number: newNumber }\n// \tpersonService\n// \t\t.putInfo(person.id, changedPerson)\n// \t\t.then(editedPerson => {\n// \t\t\tsetPersons(persons.map(person =>\n// \t\t\t\tperson.id !== editedPerson.id ? person : editedPerson))\n// \t\t\tsetSuccessMessage(`Changed ${changedPerson.name}`)\n// \t\t\tsetTimeout(() => {\n// \t\t\t\tsetSuccessMessage(null)\n// \t\t\t}, 5000)\n// \t\t})\n// \t\t.catch(error => {\n// \t\t\tsetErrorMessage(`Information of ${person.name} has already been removed from server`)\n// \t\t\tsetTimeout(() => {\n// \t\t\t\tsetSuccessMessage(null)\n// \t\t\t}, 5000)\n// \t\t})\n// }\n};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:newNumber,onChange:handleNumberChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]});};var Persons=function Persons(_ref3){var persons=_ref3.persons,filter=_ref3.filter,deleteUser=_ref3.deleteUser;var filteredPersons=persons.filter(function(person){return person.name.toLowerCase().includes(filter.toLowerCase());});return/*#__PURE__*/_jsx(_Fragment,{children:filteredPersons.map(function(person){return/*#__PURE__*/_jsxs(\"p\",{children:[person.name,\" \",person.number,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteUser(person.id);},children:\"delete\"})]},person.id);})});};var Notification=function Notification(_ref4){var successMessage=_ref4.successMessage,errorMessage=_ref4.errorMessage;if(successMessage===null&&errorMessage===null)return;if(successMessage)return/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:successMessage});else return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMessage});};export default App;","map":{"version":3,"names":["useEffect","useState","React","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","successMessage","setSuccessMessage","errorMessage","setErrorMessage","deleteUser","id","person","find","n","window","confirm","name","then","catch","error","p","setTimeout","getAll","Filter","handleFilterChange","event","target","value","Form","handleNameChange","handleNumberChange","addPerson","preventDefault","personObject","number","create","returnedPerson","concat","Persons","filteredPersons","toLowerCase","includes","map","Notification"],"sources":["/Users/henrimaronen/workspace/github/fullstackopen_2022/part2/phonebook/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport React from 'react'\nimport personService from './services/persons.js'\nimport './index.css'\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([])\n\tconst [newName, setNewName] = useState(\"\")\n\tconst [newNumber, setNewNumber] = useState(\"\")\n\tconst [filter, setFilter] = useState(\"\")\n\tconst [successMessage, setSuccessMessage] = useState(null)\n\tconst [errorMessage, setErrorMessage] = useState(null)\n\n\tconst deleteUser = function (id) {\n\t\tconst person = persons.find(n => n.id === id)\n\n\t\tif (window.confirm(`Delete ${person.name} ?`)) {\n\t\t\tpersonService\n\t\t\t\t.deleteUser(id)\n\t\t\t\t.then(setPersons(persons.filter(person => person.id !== id)))\n\t\t\t\t.catch(error => {\n\t\t\t\t\tsetErrorMessage(`Information of ${person.name} has already been removed from server`)\n\t\t\t\t\tsetPersons(persons.filter(p => p.id !== person.id))\n\t\t\t\t})\n\t\t\tsetTimeout(() => setErrorMessage(null), 5000)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tpersonService\n\t\t\t.getAll()\n\t\t\t.then(persons => {\n\t\t\t\tsetPersons(persons)\n\t\t\t})\n\t}, [])\n\n\treturn (\n\t\t<div>\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Notification successMessage={successMessage} errorMessage={errorMessage}></Notification>\n\t\t\t<Filter filter={filter} setFilter={setFilter} />\n\t\t\t<h3>add new</h3>\n\t\t\t<Form\n\t\t\t\tpersons={persons}\n\t\t\t\tnewName={newName}\n\t\t\t\tnewNumber={newNumber}\n\t\t\t\tsetNewName={setNewName}\n\t\t\t\tsetPersons={setPersons}\n\t\t\t\tsetNewNumber={setNewNumber}\n\t\t\t\tsetErrorMessage={setErrorMessage}\n\t\t\t\tsetSuccessMessage={setSuccessMessage}\n\t\t\t/>\n\n\t\t\t<h3>Numbers</h3>\n\t\t\t<Persons\n\t\t\t\tpersons={persons}\n\t\t\t\tfilter={filter}\n\t\t\t\tdeleteUser={deleteUser}></Persons>\n\t\t</div>\n\t)\n}\n\nconst Filter = ({ filter, setFilter }) => {\n\tconst handleFilterChange = (event) => {\n\t\tsetFilter(event.target.value)\n\t}\n\n\treturn (\n\t\t<form>\n\t\t\t<div>\n\t\t\t\tfilter shown with:\n\t\t\t\t<input value={filter} onChange={handleFilterChange}></input>\n\t\t\t</div>\n\t\t</form>\n\t)\n}\n\nconst Form = ({\n\tpersons,\n\tnewName,\n\tnewNumber,\n\tsetPersons,\n\tsetNewName,\n\tsetNewNumber,\n\tsetErrorMessage,\n\tsetSuccessMessage }) => {\n\n\tconst handleNameChange = event => {\n\t\tsetNewName(event.target.value)\n\t}\n\n\tconst handleNumberChange = event => {\n\t\tsetNewNumber(event.target.value)\n\t}\n\n\tconst addPerson = (event) => {\n\t\tevent.preventDefault()\n\t\t// const person = persons.find(person => person.name === newName)\n\n\t\t// if (person === undefined) {\n\t\t\tconst personObject = {\n\t\t\t\tname: newName,\n\t\t\t\tnumber: newNumber,\n\t\t\t}\n\n\t\t\tpersonService\n\t\t\t\t.create(personObject)\n\t\t\t\t.then(returnedPerson => {\n\t\t\t\t\tsetPersons(persons.concat(returnedPerson))\n\t\t\t\t})\n\t\t\tsetSuccessMessage(`Added ${personObject.name}`)\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetSuccessMessage(null)\n\t\t\t}, 5000)\n\t\t// }\n\t\t// else {\n\t\t// \tif (!window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n\t\t// \t\treturn;\n\n\t\t// \tconst changedPerson = { ...person, number: newNumber }\n\n\t\t// \tpersonService\n\t\t// \t\t.putInfo(person.id, changedPerson)\n\t\t// \t\t.then(editedPerson => {\n\t\t// \t\t\tsetPersons(persons.map(person =>\n\t\t// \t\t\t\tperson.id !== editedPerson.id ? person : editedPerson))\n\t\t// \t\t\tsetSuccessMessage(`Changed ${changedPerson.name}`)\n\t\t// \t\t\tsetTimeout(() => {\n\t\t// \t\t\t\tsetSuccessMessage(null)\n\t\t// \t\t\t}, 5000)\n\t\t// \t\t})\n\t\t// \t\t.catch(error => {\n\t\t// \t\t\tsetErrorMessage(`Information of ${person.name} has already been removed from server`)\n\t\t// \t\t\tsetTimeout(() => {\n\t\t// \t\t\t\tsetSuccessMessage(null)\n\t\t// \t\t\t}, 5000)\n\t\t// \t\t})\n\t\t// }\n\t}\n\treturn (\n\t\t<form onSubmit={addPerson}>\n\t\t\t<div>\n\t\t\t\tname: <input value={newName} onChange={handleNameChange} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tnumber: <input value={newNumber} onChange={handleNumberChange} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t</div>\n\t\t</form>\n\t)\n}\n\nconst Persons = ({ persons, filter, deleteUser }) => {\n\tconst filteredPersons = persons.filter((person) =>\n\t\tperson.name.toLowerCase().includes(filter.toLowerCase()))\n\n\treturn (\n\t\t<>\n\t\t\t{filteredPersons.map(person =>\n\t\t\t\t<p key={person.id}>\n\t\t\t\t\t{person.name} {person.number}\n\t\t\t\t\t<button onClick={() => deleteUser(person.id)}>\n\t\t\t\t\t\tdelete\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nconst Notification = ({ successMessage, errorMessage }) => {\n\tif (successMessage === null && errorMessage === null)\n\t\treturn;\n\tif (successMessage)\n\t\treturn <div className='success'>{successMessage}</div>\n\telse\n\t\treturn <div className='error'>{errorMessage}</div>\n}\n\nexport default App"],"mappings":"6JAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,cAAP,KAA0B,uBAA1B,CACA,MAAO,aAAP,C,6IAEA,GAAMC,IAAG,CAAG,QAANA,IAAM,EAAM,CACjB,cAA8BH,QAAQ,CAAC,EAAD,CAAtC,wCAAOI,OAAP,eAAgBC,UAAhB,eACA,eAA8BL,QAAQ,CAAC,EAAD,CAAtC,yCAAOM,OAAP,eAAgBC,UAAhB,eACA,eAAkCP,QAAQ,CAAC,EAAD,CAA1C,yCAAOQ,SAAP,eAAkBC,YAAlB,eACA,eAA4BT,QAAQ,CAAC,EAAD,CAApC,yCAAOU,MAAP,eAAeC,SAAf,eACA,eAA4CX,QAAQ,CAAC,IAAD,CAApD,0CAAOY,cAAP,gBAAuBC,iBAAvB,gBACA,gBAAwCb,QAAQ,CAAC,IAAD,CAAhD,2CAAOc,YAAP,gBAAqBC,eAArB,gBAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAAUC,EAAV,CAAc,CAChC,GAAMC,OAAM,CAAGd,OAAO,CAACe,IAAR,CAAa,SAAAC,CAAC,QAAIA,EAAC,CAACH,EAAF,GAASA,EAAb,EAAd,CAAf,CAEA,GAAII,MAAM,CAACC,OAAP,kBAAyBJ,MAAM,CAACK,IAAhC,OAAJ,CAA+C,CAC9CrB,aAAa,CACXc,UADF,CACaC,EADb,EAEEO,IAFF,CAEOnB,UAAU,CAACD,OAAO,CAACM,MAAR,CAAe,SAAAQ,MAAM,QAAIA,OAAM,CAACD,EAAP,GAAcA,EAAlB,EAArB,CAAD,CAFjB,EAGEQ,KAHF,CAGQ,SAAAC,KAAK,CAAI,CACfX,eAAe,0BAAmBG,MAAM,CAACK,IAA1B,0CAAf,CACAlB,UAAU,CAACD,OAAO,CAACM,MAAR,CAAe,SAAAiB,CAAC,QAAIA,EAAC,CAACV,EAAF,GAASC,MAAM,CAACD,EAApB,EAAhB,CAAD,CAAV,CACA,CANF,EAOAW,UAAU,CAAC,iBAAMb,gBAAe,CAAC,IAAD,CAArB,EAAD,CAA8B,IAA9B,CAAV,CACA,CACD,CAbD,CAeAhB,SAAS,CAAC,UAAM,CACfG,aAAa,CACX2B,MADF,GAEEL,IAFF,CAEO,SAAApB,OAAO,CAAI,CAChBC,UAAU,CAACD,OAAD,CAAV,CACA,CAJF,EAKA,CANQ,CAMN,EANM,CAAT,CAQA,mBACC,oCACC,iCADD,cAEC,KAAC,YAAD,EAAc,cAAc,CAAEQ,cAA9B,CAA8C,YAAY,CAAEE,YAA5D,EAFD,cAGC,KAAC,MAAD,EAAQ,MAAM,CAAEJ,MAAhB,CAAwB,SAAS,CAAEC,SAAnC,EAHD,cAIC,+BAJD,cAKC,KAAC,IAAD,EACC,OAAO,CAAEP,OADV,CAEC,OAAO,CAAEE,OAFV,CAGC,SAAS,CAAEE,SAHZ,CAIC,UAAU,CAAED,UAJb,CAKC,UAAU,CAAEF,UALb,CAMC,YAAY,CAAEI,YANf,CAOC,eAAe,CAAEM,eAPlB,CAQC,iBAAiB,CAAEF,iBARpB,EALD,cAgBC,+BAhBD,cAiBC,KAAC,OAAD,EACC,OAAO,CAAET,OADV,CAEC,MAAM,CAAEM,MAFT,CAGC,UAAU,CAAEM,UAHb,EAjBD,GADD,CAwBA,CAvDD,CAyDA,GAAMc,OAAM,CAAG,QAATA,OAAS,MAA2B,IAAxBpB,OAAwB,MAAxBA,MAAwB,CAAhBC,SAAgB,MAAhBA,SAAgB,CACzC,GAAMoB,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,KAAD,CAAW,CACrCrB,SAAS,CAACqB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAT,CACA,CAFD,CAIA,mBACC,mCACC,yDAEC,cAAO,KAAK,CAAExB,MAAd,CAAsB,QAAQ,CAAEqB,kBAAhC,EAFD,GADD,EADD,CAQA,CAbD,CAeA,GAAMI,KAAI,CAAG,QAAPA,KAAO,OAQY,IAPxB/B,QAOwB,OAPxBA,OAOwB,CANxBE,OAMwB,OANxBA,OAMwB,CALxBE,SAKwB,OALxBA,SAKwB,CAJxBH,UAIwB,OAJxBA,UAIwB,CAHxBE,UAGwB,OAHxBA,UAGwB,CAFxBE,YAEwB,OAFxBA,YAEwB,CADxBM,eACwB,OADxBA,eACwB,CAAxBF,iBAAwB,OAAxBA,iBAAwB,CAExB,GAAMuB,iBAAgB,CAAG,QAAnBA,iBAAmB,CAAAJ,KAAK,CAAI,CACjCzB,UAAU,CAACyB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAV,CACA,CAFD,CAIA,GAAMG,mBAAkB,CAAG,QAArBA,mBAAqB,CAAAL,KAAK,CAAI,CACnCvB,YAAY,CAACuB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAZ,CACA,CAFD,CAIA,GAAMI,UAAS,CAAG,QAAZA,UAAY,CAACN,KAAD,CAAW,CAC5BA,KAAK,CAACO,cAAN,GACA;AAEA;AACC,GAAMC,aAAY,CAAG,CACpBjB,IAAI,CAAEjB,OADc,CAEpBmC,MAAM,CAAEjC,SAFY,CAArB,CAKAN,aAAa,CACXwC,MADF,CACSF,YADT,EAEEhB,IAFF,CAEO,SAAAmB,cAAc,CAAI,CACvBtC,UAAU,CAACD,OAAO,CAACwC,MAAR,CAAeD,cAAf,CAAD,CAAV,CACA,CAJF,EAKA9B,iBAAiB,iBAAU2B,YAAY,CAACjB,IAAvB,EAAjB,CACAK,UAAU,CAAC,UAAM,CAChBf,iBAAiB,CAAC,IAAD,CAAjB,CACA,CAFS,CAEP,IAFO,CAAV,CAGD;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA3CD,CA4CA,mBACC,cAAM,QAAQ,CAAEyB,SAAhB,wBACC,6CACO,cAAO,KAAK,CAAEhC,OAAd,CAAuB,QAAQ,CAAE8B,gBAAjC,EADP,GADD,cAIC,+CACS,cAAO,KAAK,CAAE5B,SAAd,CAAyB,QAAQ,CAAE6B,kBAAnC,EADT,GAJD,cAOC,kCACC,eAAQ,IAAI,CAAC,QAAb,iBADD,EAPD,GADD,CAaA,CA3ED,CA6EA,GAAMQ,QAAO,CAAG,QAAVA,QAAU,OAAqC,IAAlCzC,QAAkC,OAAlCA,OAAkC,CAAzBM,MAAyB,OAAzBA,MAAyB,CAAjBM,UAAiB,OAAjBA,UAAiB,CACpD,GAAM8B,gBAAe,CAAG1C,OAAO,CAACM,MAAR,CAAe,SAACQ,MAAD,QACtCA,OAAM,CAACK,IAAP,CAAYwB,WAAZ,GAA0BC,QAA1B,CAAmCtC,MAAM,CAACqC,WAAP,EAAnC,CADsC,EAAf,CAAxB,CAGA,mBACC,yBACED,eAAe,CAACG,GAAhB,CAAoB,SAAA/B,MAAM,qBAC1B,qBACEA,MAAM,CAACK,IADT,KACgBL,MAAM,CAACuB,MADvB,cAEC,eAAQ,OAAO,CAAE,yBAAMzB,WAAU,CAACE,MAAM,CAACD,EAAR,CAAhB,EAAjB,oBAFD,GAAQC,MAAM,CAACD,EAAf,CAD0B,EAA1B,CADF,EADD,CAYA,CAhBD,CAkBA,GAAMiC,aAAY,CAAG,QAAfA,aAAe,OAAsC,IAAnCtC,eAAmC,OAAnCA,cAAmC,CAAnBE,YAAmB,OAAnBA,YAAmB,CAC1D,GAAIF,cAAc,GAAK,IAAnB,EAA2BE,YAAY,GAAK,IAAhD,CACC,OACD,GAAIF,cAAJ,CACC,mBAAO,YAAK,SAAS,CAAC,SAAf,UAA0BA,cAA1B,EAAP,CADD,IAGC,oBAAO,YAAK,SAAS,CAAC,OAAf,UAAwBE,YAAxB,EAAP,CACD,CAPD,CASA,cAAeX,IAAf"},"metadata":{},"sourceType":"module"}